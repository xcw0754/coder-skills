# static和extern的作用

### static 静态变量

`static`关键字可用于声明全局/局部变量为静态变量。一般放在源文件中。

- 静态全局变量。`file`
通常在单个文件中需要限制某个全局变量不让其他文件使用，比如b文件include a文件，b是访问不了a文件中的静态全局变量的，从而起到文件隔离的效果。而且b中还可以定义同名的变量喔。和普通的全局变量的区别就是，普通全局变量在其他文件是有办法访问到的，静态全局变量没办法。

- 静态局部变量。	`function`
我们可以在某个函数体内声明一个static变量，这个变量就不同于普通的函数体内的变量了，它全局唯一，自创建之后直到程序结束而销毁，无论从哪个地方调用此函数，使用的都是同一个static变量，多线程时就得小心了。它的一个典型应用是单例模式。

- 静态成员变量。 `class`
static还可以用在声明类中的变量，即静态成员变量。这样的变量属于这个类独有，所有该类的实例共享。

关于静态变量生存周期还可参考 ([初始化与未初始化的变量](https://github.com/xcw0754/coder-skills/blob/master/languages/CPP/CPP-106-uninitialized.md))


### static 静态函数

`static`关键字可用于声明某个函数为静态函数。可以是类中的函数，也可以是类外的函数。
- 类内的静态函数。
当某个类中含有静态成员函数时，无需通过实例即可调用它。但是静态成员函数也有局限，它能调用类内的静态成员函数和静态成员数据，却访问不了其他成员函数和成员数据。而其他成员函数反过来却可以调用静态成员函数。

- 类外的静态函数。
在声明普通函数为静态函数后，其他文件就不能访问这个函数了，效果同静态全局变量一样起文件隔离效果。

关于static关键字，可参考[c++中static的用法详解](http://m.blog.csdn.net/majianfei1023/article/details/45290467)



### extern 关键字

`extern`可以用于修饰变量或函数，一般放在头文件中，在C中和C++中的用法略有差异。一般有两种用法：
- 一种格式如`extern int a;`，用于修饰变量和函数。
- 另一种格式如`extern "C" {...}`，用于修饰函数或代码块。

> 第一种。
> `extern int a;`这只是声明，不是定义。若某模块(可以是几个源文件加头文件)中有这样的声明，就是在告诉编译器，a在其他模块中定义，本模块用的a不在本模块中定义。于是，在编译本模块时，编译器会特殊标记a，等链接阶段的时候集中处理。同理，如果想直接使用其他模块中定义的函数，可以通过同样的声明来使用。这样可以单模块地编译，而不会报函数未实现的错。

> 第二种。
> `extern "C" void func(int, double)`这是声明。这样是修饰一个函数，告诉编译器按C的规则来编译，比如函数名按C的规则生成(要知道编译器加工过的函数名并不仅仅是你写的函数名)。

关于extern关键字，可参考[C/C++中extern关键字详解](https://www.cnblogs.com/yc_sunniwell/archive/2010/07/14/1777431.html)




















