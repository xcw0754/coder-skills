# define和inline的区别


### 不同之处

> define

- 编译前的预处理
- 执行简单字符串替换工作


> inline

- 编译时处理，有普通函数的所有特点
- 建议编译器进行函数展开，只是建议，未必会展开，由编译器决定



-----
### 相同之处

- 两者是用于避免调用函数时带来的压栈消耗
- 若能展开，两者开销不会太大


-----
### define有什么坑？
以下两种定义方式
```
#define sqrt(A) A*A
#define sqrt(B) (B)*(B)
```
分别用这两种来计算看看效果
```
int i=7;
sqrt(i);
sqrt(i+1);
sqrt(--i)
```
只是执行简单替换，这些就是基本的坑。


-----
### inline有什么坑？

- 关键字必须加在函数定义处，而不能仅加在函数明处。
- 编译器有时会展开有时不会展开，有时在不加inline时也会展开(和优化有关，如-O2选项)。
- 调试时你加在内联函数内的断点可能被忽略，即调试不了。








